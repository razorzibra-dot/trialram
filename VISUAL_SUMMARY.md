# ğŸ¯ Visual Summary - Enterprise Performance Pattern\n\n## The Problem (Before)\n\n```\nUser navigates to Customers page:\n\nApp.tsx\n  â”œâ”€ AuthContext loads SessionService\n  â”‚  â””â”€ GET /auth/me (user)\n  â”‚  â””â”€ GET /tenants/{id} (tenant)\n  â”‚\n  â”œâ”€ ReferenceDataContext loads reference data\n  â”‚  â””â”€ GET /status_options\n  â”‚  â””â”€ GET /reference_data  \n  â”‚  â””â”€ GET /suppliers\n  â”‚\n  â””â”€ CustomersPage mounts\n     â”œâ”€ CustomerList component\n     â”‚  â””â”€ useCustomers() â†’ GET /customers â† EXTRA CALL!\n     â”‚\n     â”œâ”€ CustomerStats component\n     â”‚  â””â”€ useUsers() â†’ GET /users â† EXTRA CALL!\n     â”‚\n     â””â”€ CustomerFilters component\n        â””â”€ useReferenceData() â†’ Already in context âœ“\n\nResult:\nâ”œâ”€ Total API calls: 8 (2 session + 3 reference + 2 module + 1 extra)\nâ”œâ”€ Timeline: 700ms (sequential)\nâ”œâ”€ Problem: 2 extra calls per page from scattered components\nâ””â”€ Worse: Same pattern repeats for every page!\n```\n\n---\n\n## The Solution (After)\n\n```\nUser navigates to Customers page:\n\nApp.tsx (One time)\n  â”œâ”€ SessionService loads on login\n  â”‚  â””â”€ GET /auth/me (cached forever)\n  â”‚  â””â”€ GET /tenants/{id} (cached forever)\n  â”‚\n  â””â”€ ReferenceDataContext loads on app start\n     â””â”€ GET /status_options (cached 5 min)\n     â””â”€ GET /reference_data (cached 5 min)\n     â””â”€ GET /suppliers (cached 5 min)\n\nCustomersPage mounts\n  â”œâ”€ ModuleDataProvider wraps entire page\n  â”‚  â”œâ”€ Checks PageDataService cache\n  â”‚  â””â”€ Executes parallel batch:\n  â”‚     â”œâ”€ loadSessionData() â†’ Cache hit! (0ms)\n  â”‚     â”œâ”€ loadReferenceData() â†’ Cache hit! (0ms)\n  â”‚     â”œâ”€ loadCustomers() â†’ API call (200ms)\n  â”‚     â””â”€ loadUsers() â†’ API call (200ms)  [in PARALLEL]\n  â”‚\n  â””â”€ All child components mount with data ready\n     â”œâ”€ CustomerList\n     â”‚  â””â”€ useModuleData() â†’ No API call! âœ“\n     â”‚\n     â”œâ”€ CustomerStats\n     â”‚  â””â”€ useModuleData() â†’ No API call! âœ“\n     â”‚\n     â””â”€ CustomerFilters\n        â””â”€ useModuleData() â†’ No API call! âœ“\n\nResult:\nâ”œâ”€ Total API calls: 5 (2 session + 3 reference, reused) + 2 module (parallel)\nâ”œâ”€ Timeline: 200ms (parallel)\nâ”œâ”€ Solution: Zero extra calls, all data pre-loaded\nâ””â”€ Better: Pattern reused for every page!\n```\n\n---\n\n## Performance Comparison Timeline\n\n### BEFORE (Sequential, 700ms total)\n\n```\n0ms     100ms    200ms    300ms    400ms    500ms    600ms    700ms\n|-------|--------|--------|--------|--------|--------|--------|-------|\n\nSessionService init\nâ”œâ”€ GET /auth/me â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 100ms\nâ””â”€ GET /tenants/{id} â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nReferenceDataContext init\nâ”œâ”€ GET /status_options â”€â”€â”€â”€â”€â”€â”\nâ”œâ”€ GET /reference_data â”€â”€â”€â”€â”€â”€â”¤ 150ms\nâ””â”€ GET /suppliers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nCustomerList component\nâ””â”€ GET /customers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                                                100ms\n                                                   â”œâ”€ Total: 700ms\nCustomerStats component                            â”‚\nâ””â”€ GET /users â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nPage ready at 700ms âœ— SLOW\n```\n\n### AFTER (Parallel, 200ms total)\n\n```\n0ms     100ms    200ms\n|--------|--------|-------|\n\nSessionService init\nâ”œâ”€ GET /auth/me â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 100ms (done, cached)\nâ””â”€ GET /tenants/{id} â”€â”€â”€â”€â”€â”€â”€â”˜\n\nReferenceDataContext init\nâ”œâ”€ GET /status_options â”€â”€â”€â”€â”€â”€â”\nâ”œâ”€ GET /reference_data â”€â”€â”€â”€â”€â”€â”¤ 150ms (done, cached)\nâ””â”€ GET /suppliers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nModuleDataProvider batch (PARALLEL)\nâ”œâ”€ loadSessionData() â”€â”€â”€â”€â”€â”€â”€ Cache hit! (0ms)\nâ”œâ”€ loadReferenceData() â”€â”€â”€â”€â”€â”€ Cache hit! (0ms)\nâ”œâ”€ loadCustomers() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                       200ms\nâ””â”€ loadUsers() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nPage ready at 200ms âœ“ FAST (3.5x faster)\n```\n\n---\n\n## Architecture Layers\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ TIER 1: SESSION LAYER (Lifetime of login)                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  SessionService (Singleton)                                â”‚\nâ”‚  â”œâ”€ Load: User + Tenant (2 API calls on login)            â”‚\nâ”‚  â”œâ”€ Cache: Memory + sessionStorage                         â”‚\nâ”‚  â”œâ”€ TTL: Never expires (session-based)                     â”‚\nâ”‚  â””â”€ Access: sessionService.getCurrentUser()               â”‚\nâ”‚                                                             â”‚\nâ”‚  Result: User + Tenant available EVERYWHERE               â”‚\nâ”‚          with ZERO API calls after login                  â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ TIER 2: APP LAYER (Lifetime of app, 5-min cache)          â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  ReferenceDataContext (App Provider)                       â”‚\nâ”‚  â”œâ”€ Load: Status, Categories, Suppliers (3 API calls)    â”‚\nâ”‚  â”œâ”€ Cache: Memory Map (outside React state)               â”‚\nâ”‚  â”œâ”€ TTL: 5 minutes with auto-refresh                      â”‚\nâ”‚  â””â”€ Access: useReferenceData() hook                        â”‚\nâ”‚                                                             â”‚\nâ”‚  Result: Reference data available on ALL pages            â”‚\nâ”‚          with ZERO per-page API calls                     â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ TIER 3: PAGE LAYER (Per route, 5-min cache)               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  ModuleDataProvider + PageDataService                      â”‚\nâ”‚  â”œâ”€ Load: Module-specific data (customers, deals, etc)    â”‚\nâ”‚  â”œâ”€ Cache: Per-route cache with in-flight dedup          â”‚\nâ”‚  â”œâ”€ TTL: 5 minutes per route                              â”‚\nâ”‚  â””â”€ Access: useModuleData() hook                           â”‚\nâ”‚                                                             â”‚\nâ”‚  Example for /customers:                                   â”‚\nâ”‚  â”œâ”€ Promise.all([                                          â”‚\nâ”‚  â”‚   loadSessionData(),      // Cache hit (0ms)           â”‚\nâ”‚  â”‚   loadReferenceData(),    // Cache hit (0ms)           â”‚\nâ”‚  â”‚   loadCustomers(),        // API call (200ms)          â”‚\nâ”‚  â”‚   loadUsers()             // API call (200ms)          â”‚\nâ”‚  â”‚ ])                                                       â”‚\nâ”‚  â””â”€ Completes in 200ms (parallel, not 400ms)              â”‚\nâ”‚                                                             â”‚\nâ”‚  Result: Module data available to all child components    â”‚\nâ”‚          with ZERO per-component API calls                â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                          â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ TIER 4: COMPONENT LAYER (Zero API calls)                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  All Child Components                                       â”‚\nâ”‚  â”œâ”€ Hook: useModuleData()                                  â”‚\nâ”‚  â”œâ”€ Access: data?.moduleData.customers (from context)     â”‚\nâ”‚  â”œâ”€ API Calls: ZERO (all pre-loaded)                     â”‚\nâ”‚  â””â”€ Result: Instant render with data                       â”‚\nâ”‚                                                             â”‚\nâ”‚  CustomerList       â†’ No API call âœ“                        â”‚\nâ”‚  CustomerStats      â†’ No API call âœ“                        â”‚\nâ”‚  CustomerFilters    â†’ No API call âœ“                        â”‚\nâ”‚  (All access useModuleData() hook)                         â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Data Flow Visualization\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ User Login   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ SessionService          â”‚  â—„â”€â”€â”€ Singleton\nâ”‚ initializeSession()     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ API Calls:              â”‚\nâ”‚ - GET /auth/me          â”‚  (100ms)\nâ”‚ - GET /tenants/{id}     â”‚  (parallel)\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Cache:                  â”‚\nâ”‚ - Memory (fast)         â”‚\nâ”‚ - sessionStorage (persistent)\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ (User + Tenant cached forever)\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ App Starts              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ReferenceDataContext (Provider) â”‚  â—„â”€â”€â”€ App-level\nâ”‚ getAllReferenceData()           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ API Calls:                      â”‚\nâ”‚ - GET /status_options           â”‚  (150ms)\nâ”‚ - GET /reference_data           â”‚  (parallel)\nâ”‚ - GET /suppliers                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Cache:                          â”‚\nâ”‚ - Memory Map (5-min TTL)        â”‚\nâ”‚ - Survives React StrictMode     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ (Reference data cached for all pages)\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ User navigates to /customers    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ModuleDataProvider (Page-level)        â”‚  â—„â”€â”€â”€ Per-route\nâ”‚ requirements = {                       â”‚\nâ”‚   session: true,                       â”‚\nâ”‚   referenceData: {...},                â”‚\nâ”‚   module: { customers, users }         â”‚\nâ”‚ }                                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ PageDataService.getPageData()          â”‚\nâ”‚ â””â”€ Promise.all([                       â”‚\nâ”‚    â”œâ”€ loadSessionData()                â”‚  â†’ Cache hit (0ms)\nâ”‚    â”œâ”€ loadReferenceData()              â”‚  â†’ Cache hit (0ms)\nâ”‚    â”œâ”€ loadCustomers()  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â†’ API call (200ms)\nâ”‚    â””â”€ loadUsers()      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â†’ API call (200ms)\nâ”‚    ])                                  â”‚\nâ”‚ â””â”€ Completes in 200ms (parallel)      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Cache:                                 â”‚\nâ”‚ - Per-route cache (5-min TTL)         â”‚\nâ”‚ - In-flight request dedup              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ (All page data cached)\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ModuleDataContext                  â”‚  â—„â”€â”€â”€ Context provider\nâ”‚ (data available to all children)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚             â”‚             â”‚              â”‚\n       â–¼             â–¼             â–¼              â–¼\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚Customerâ”‚   â”‚Customerâ”‚   â”‚Customer â”‚   â”‚   Other   â”‚\n   â”‚  List  â”‚   â”‚ Stats  â”‚   â”‚ Filters â”‚   â”‚Components â”‚\n   â”‚        â”‚   â”‚        â”‚   â”‚         â”‚   â”‚           â”‚\n   â”‚useModule  â”‚useModule  â”‚useModule  â”‚   â”‚useModule  â”‚\n   â”‚Data()   â”‚Data()   â”‚Data()    â”‚   â”‚Data()     â”‚\n   â”‚        â”‚   â”‚        â”‚   â”‚         â”‚   â”‚           â”‚\n   â”‚Zero APIâ”‚   â”‚Zero APIâ”‚   â”‚Zero API â”‚   â”‚Zero API   â”‚\n   â”‚calls âœ“ â”‚   â”‚calls âœ“ â”‚   â”‚calls âœ“  â”‚   â”‚calls âœ“    â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n   All render immediately with data from context\n```\n\n---\n\n## Cache Lifecycle\n\n```\nSCENARIO 1: First App Load\nâ”œâ”€ 0ms: User logs in\nâ”œâ”€ 100ms: SessionService loads user + tenant\nâ”œâ”€ 150ms: ReferenceDataContext loads reference data\nâ”œâ”€ 200ms: User clicks \"Customers\"\nâ”œâ”€ 200-400ms: PageDataService loads customers + users (in parallel)\nâ””â”€ 400ms: Page ready\n\nSCENARIO 2: Refresh Page (Within 5 min)\nâ”œâ”€ 0ms: User refreshes page\nâ”œâ”€ 0ms: SessionService check cache â†’ HIT!\nâ”œâ”€ 0ms: ReferenceDataContext check cache â†’ HIT!\nâ”œâ”€ 0ms: PageDataService check cache â†’ HIT!\nâ””â”€ 10ms: Page ready (all from cache)\n\nSCENARIO 3: Navigate to Different Page\nâ”œâ”€ 0ms: User clicks \"Deals\"\nâ”œâ”€ 0ms: SessionService check cache â†’ HIT!\nâ”œâ”€ 0ms: ReferenceDataContext check cache â†’ HIT!\nâ”œâ”€ 0ms: PageDataService check cache for /deals â†’ MISS (first visit)\nâ”œâ”€ 0-200ms: Load deals + products (in parallel)\nâ””â”€ 200ms: Deals page ready\n\nSCENARIO 4: Return to Previous Page (Within 5 min)\nâ”œâ”€ 0ms: User clicks back to Customers\nâ”œâ”€ 0ms: SessionService check cache â†’ HIT!\nâ”œâ”€ 0ms: ReferenceDataContext check cache â†’ HIT!\nâ”œâ”€ 0ms: PageDataService check cache for /customers â†’ HIT!\nâ””â”€ 5ms: Page ready (all from cache)\n\nSCENARIO 5: Return to Previous Page (After 5 min)\nâ”œâ”€ 0ms: User clicks back to Customers (after 5+ min)\nâ”œâ”€ 0ms: SessionService check cache â†’ HIT!\nâ”œâ”€ 0ms: ReferenceDataContext check cache â†’ EXPIRED â†’ Refresh\nâ”‚  (Optional: Can refresh in background, use stale cache initially)\nâ”œâ”€ 0-200ms: PageDataService check cache â†’ EXPIRED â†’ Reload\nâ”‚  (Customers + users in parallel)\nâ””â”€ 200ms: Page ready (fresh data)\n```\n\n---\n\n## The 4 Rules (Visual)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RULE 1: Reference Data - Context Only                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  âœ… CORRECT:                                               â”‚\nâ”‚     const { statusOptions } = useReferenceData();          â”‚\nâ”‚     const { data } = useModuleData();                      â”‚\nâ”‚     const statusOptions = data.referenceData.statusOptions;â”‚\nâ”‚                                                             â”‚\nâ”‚  âŒ WRONG:                                                  â”‚\nâ”‚     const data = await referenceDataService.getStatusOptions();\nâ”‚     useQuery(['statusOptions'], () => refService.get...); â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RULE 2: Session Data - SessionService Only                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  âœ… CORRECT:                                               â”‚\nâ”‚     const user = sessionService.getCurrentUser();          â”‚\nâ”‚     const tenantId = sessionService.getTenantId();         â”‚\nâ”‚                                                             â”‚\nâ”‚  âŒ WRONG:                                                  â”‚\nâ”‚     const user = await supabase.from('users').select('*'); â”‚\nâ”‚     await multiTenantService.initializeTenantContext(...);â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RULE 3: Service Caching - In-Flight Dedup                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  âœ… CORRECT:                                               â”‚\nâ”‚     private inFlight = new Map();                          â”‚\nâ”‚     private cache = new Map();                             â”‚\nâ”‚     async getData() {                                       â”‚\nâ”‚       // 1. Check cache                                    â”‚\nâ”‚       // 2. Check in-flight                                â”‚\nâ”‚       // 3. Fetch new                                      â”‚\nâ”‚     }                                                       â”‚\nâ”‚                                                             â”‚\nâ”‚  âŒ WRONG:                                                  â”‚\nâ”‚     async getData() {                                       â”‚\nâ”‚       return await supabase.from('items').select('*');    â”‚\nâ”‚     } // No cache, no dedup                                â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RULE 4: Page-Level Batch Loading                           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  âœ… CORRECT:                                               â”‚\nâ”‚     <ModuleDataProvider requirements={REQUIREMENTS}>       â”‚\nâ”‚       <CustomersPage />                                     â”‚\nâ”‚     </ModuleDataProvider>                                   â”‚\nâ”‚                                                             â”‚\nâ”‚     function CustomerList() {                              â”‚\nâ”‚       const { data } = useModuleData();                    â”‚\nâ”‚       // No API calls - data from context                 â”‚\nâ”‚     }                                                       â”‚\nâ”‚                                                             â”‚\nâ”‚  âŒ WRONG:                                                  â”‚\nâ”‚     function CustomerList() {                              â”‚\nâ”‚       const { data } = useQuery(['customers'], ...);       â”‚\nâ”‚       // API call per component (scattered)               â”‚\nâ”‚     }                                                       â”‚\nâ”‚                                                             â”‚\nâ”‚     function CustomerStats() {                             â”‚\nâ”‚       const { data } = useQuery(['users'], ...);           â”‚\nâ”‚       // Another API call (not coordinated)               â”‚\nâ”‚     }                                                       â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Implementation Sequence\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Week 1: Customers    â”‚\nâ”‚ (Proof of Concept)   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â”œâ”€ Mon: Analysis\n       â”‚  â”œâ”€ List all data-loading hooks\n       â”‚  â””â”€ Map to API calls\n       â”‚\n       â”œâ”€ Tue: Service Setup\n       â”‚  â”œâ”€ Add loaders to PageDataService\n       â”‚  â””â”€ Implement caching\n       â”‚\n       â”œâ”€ Wed: Integration\n       â”‚  â”œâ”€ Wrap page with provider\n       â”‚  â””â”€ Update components\n       â”‚\n       â”œâ”€ Thu: Testing\n       â”‚  â”œâ”€ Verify Network tab\n       â”‚  â””â”€ Test cache behavior\n       â”‚\n       â””â”€ Fri: Documentation\n          â”œâ”€ Record metrics\n          â””â”€ Update team\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Week 2-3: Rollout  â”‚\nâ”‚ (Deals, Products)  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”œâ”€ Follow same pattern\n         â”œâ”€ 3-4 hours per module\n         â””â”€ Verify each one\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Week 4: Optimize â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”œâ”€ Pre-warming\n         â”œâ”€ Cache tuning\n         â””â”€ Monitoring\n```\n\n---\n\n## Expected Results\n\n```\nBEFORE:                          AFTER:\n\n30-50 API calls          â†’      5-10 API calls       (-80%)\nper session                     per session\n\n700ms page load          â†’      200ms page load      (-71%)\naverage                         average\n\n2-3 MB bandwidth         â†’      0.5 MB bandwidth     (-80%)\nper session                     per session\n\nHigh server load         â†’      Low server load      (-80%)\n(many duplicate requests)       (cached responses)\n\nMultiple round trips     â†’      Single round trip    (-75% latency)\nfor data loading                for module data\n\nâŒ Complex state mgmt     â†’      âœ… Simple context    (+50% dev velocity)\nwith prop drilling               based access\n```\n\n---\n\nThis pattern transforms the application from scattered, slow data loading to a coordinated, cached, blazingly-fast architecture. ğŸš€\n"