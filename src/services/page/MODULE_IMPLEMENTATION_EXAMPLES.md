/**\n * MODULE IMPLEMENTATION EXAMPLES - Using Page Data Service Pattern\n * ============================================================================\n * \n * This file demonstrates how to implement modules with single-load-per-page pattern\n */\n\nimport React from 'react';\nimport { ModuleDataProvider, useModuleData } from '@/contexts/ModuleDataContext';\nimport { PageDataRequirements } from '@/services/page/PageDataService';\n\n/**\n * EXAMPLE 1: Customers Module\n * Single batch load with customers + reference data + users\n */\nconst CUSTOMERS_PAGE_REQUIREMENTS: PageDataRequirements = {\n  session: true, // Load user + tenant\n  referenceData: {\n    statusOptions: true,\n    categories: true,\n  },\n  module: {\n    customers: true,\n    users: true, // For \"Assigned To\" dropdown\n  },\n};\n\nexport const CustomersModuleWithProvider: React.FC = () => {\n  return (\n    <ModuleDataProvider requirements={CUSTOMERS_PAGE_REQUIREMENTS}>\n      <CustomersModuleContent />\n    </ModuleDataProvider>\n  );\n};\n\nconst CustomersModuleContent: React.FC = () => {\n  const { data, isLoading, error } = useModuleData();\n  \n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n  if (!data) return <div>No data</div>;\n  \n  return (\n    <div>\n      {/* All data is already loaded, components access via useModuleData */}\n      <CustomerList customers={data.moduleData.customers} />\n      <CustomerStats users={data.moduleData.users} />\n      <CustomerFilters statusOptions={data.statusOptions} />\n    </div>\n  );\n};\n\nconst CustomerList: React.FC<{ customers: any[] }> = ({ customers }) => {\n  const { data } = useModuleData(); // Zero API calls - using context data\n  \n  return (\n    <div>\n      {customers?.map(customer => (\n        <div key={customer.id}>\n          <h3>{customer.company_name}</h3>\n          <p>Status: {data?.statusOptions.find(s => s.statusKey === customer.status)?.displayLabel}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst CustomerStats: React.FC<{ users: any[] }> = ({ users }) => {\n  return (\n    <div>\n      <p>Users available for assignment: {users?.length || 0}</p>\n    </div>\n  );\n};\n\nconst CustomerFilters: React.FC<{ statusOptions: any[] }> = ({ statusOptions }) => {\n  return (\n    <div>\n      <label>Status Filter:</label>\n      <select>\n        <option value=\"\">All</option>\n        {statusOptions.map(status => (\n          <option key={status.id} value={status.statusKey}>\n            {status.displayLabel}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\n---\n\n/**\n * EXAMPLE 2: Deals Module\n * Loads deals with products and status options\n */\nconst DEALS_PAGE_REQUIREMENTS: PageDataRequirements = {\n  session: true,\n  referenceData: {\n    statusOptions: true,\n    referenceData: true,\n  },\n  module: {\n    deals: true,\n    products: true,\n    users: true,\n  },\n};\n\nexport const DealsModuleWithProvider: React.FC = () => {\n  return (\n    <ModuleDataProvider requirements={DEALS_PAGE_REQUIREMENTS}>\n      <DealsModuleContent />\n    </ModuleDataProvider>\n  );\n};\n\nconst DealsModuleContent: React.FC = () => {\n  const { data, isLoading, error } = useModuleData();\n  \n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n  if (!data) return <div>No data</div>;\n  \n  return (\n    <div>\n      {/* Single batch load provides all data */}\n      <DealsList deals={data.moduleData.deals} />\n      <DealStats deals={data.moduleData.deals} />\n    </div>\n  );\n};\n\nconst DealsList: React.FC<{ deals: any[] }> = ({ deals }) => {\n  const { data } = useModuleData(); // Zero API calls\n  \n  return (\n    <div>\n      {deals?.map(deal => (\n        <div key={deal.id}>\n          <h3>{deal.title}</h3>\n          <p>Value: ${deal.value}</p>\n          <p>Status: {data?.statusOptions.find(s => s.statusKey === deal.status)?.displayLabel}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst DealStats: React.FC<{ deals: any[] }> = ({ deals }) => {\n  const totalValue = deals?.reduce((sum, deal) => sum + (deal.value || 0), 0) || 0;\n  \n  return (\n    <div>\n      <h3>Total Deal Value: ${totalValue}</h3>\n      <p>Number of deals: {deals?.length || 0}</p>\n    </div>\n  );\n};\n\n---\n\n/**\n * EXAMPLE 3: Custom Data Loader\n * When a module needs data not provided by standard services\n */\nconst CUSTOM_PAGE_REQUIREMENTS: PageDataRequirements = {\n  session: true,\n  referenceData: { statusOptions: true },\n  module: { customers: true },\n  // Custom loader for analytics data\n  customData: async () => {\n    return {\n      analytics: {\n        totalRevenue: 150000,\n        conversionRate: 0.45,\n        topCustomers: [],\n      },\n    };\n  },\n};\n\nexport const CustomModuleWithProvider: React.FC = () => {\n  return (\n    <ModuleDataProvider requirements={CUSTOM_PAGE_REQUIREMENTS}>\n      <CustomModuleContent />\n    </ModuleDataProvider>\n  );\n};\n\nconst CustomModuleContent: React.FC = () => {\n  const { data, isLoading } = useModuleData();\n  \n  if (isLoading) return <div>Loading...</div>;\n  if (!data) return null;\n  \n  const analytics = data.moduleData.analytics;\n  \n  return (\n    <div>\n      <h2>Dashboard</h2>\n      <p>Total Revenue: ${analytics?.totalRevenue}</p>\n      <p>Conversion Rate: {analytics?.conversionRate * 100}%</p>\n    </div>\n  );\n};\n\n---\n\n/**\n * COMPARISON: Before vs After\n */\n\n// ❌ BEFORE: Multiple independent calls\nconst OldCustomersModule: React.FC = () => {\n  const { data: customers } = useCustomers(); // API call #1\n  const { statusOptions } = useReferenceData(); // API call #2 (even though loaded in context)\n  const { users } = useUsers(); // API call #3\n  const { suppliers } = useSuppliers(); // API call #4\n  \n  // Result: 4+ API calls per page load\n  // Each call loads independently, no parallelization\n};\n\n// ✅ AFTER: Single batch load\nconst NewCustomersModule: React.FC = () => {\n  const { data, isLoading } = useModuleData(); // ONE coordinated batch load\n  \n  // Result: Single API round-trip with parallel data fetching\n  // All data available immediately after load\n  \n  return (\n    <div>\n      {/* Access all pre-loaded data from context */}\n      <p>Customers: {data?.moduleData.customers?.length}</p>\n      <p>Users: {data?.moduleData.users?.length}</p>\n      <p>Status options: {data?.statusOptions?.length}</p>\n    </div>\n  );\n};\n"