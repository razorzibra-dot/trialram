20250101000001_init_tenants_and_users.sql
-- Migration: 001 - Tenants and Users
20250101000002_master_data_companies_products.sql
-- Migration: 002 - Companies and Products
20250101000003_crm_customers_sales_tickets.sql
-- Migration: 003 - Customers, Sales, and Tickets
20250101000004_contracts.sql
-- Migration: 004 - Contract Management
20250101000005_advanced_product_sales_jobwork.sql
-- Migration: 005 - Product Sales & Service Contracts & Job Work
20250101000006_notifications_and_indexes.sql
-- Migration: 006 - Notifications, Additional Indexes, and Optimization
20250101000007_row_level_security.sql
-- Migration: 007 - RLS Policies for Multi-Tenant Data Isolation
20250101000008_customer_tags.sql
-- Migration: 008 - Customer Tags Management
20250101000009_fix_rbac_schema.sql
-- Migration: 009 - Add missing RBAC tables and columns
20250101000010_add_rbac_rls_policies.sql
-- Migration: 010 - Add missing Row Level Security policies for RBAC tables
20250101000011_fix_rbac_rls_policies_v2.sql
-- Migration: 011 - Fix tenant_id query issues in RLS policies
20250101000012_enable_rls_on_rbac_tables.sql
-- Migration: 012 - Enable Row Level Security on user_roles table
20250101000013_fix_sale_items_rls_policies.sql
-- Migration: 013 - Add INSERT, UPDATE, DELETE policies for sale_items
20250101000014_add_missing_notification_columns.sql
-- Migration: 014 - Add missing notification columns (action_label, category, data, read, user_id)
20250101000015_extend_notification_type_enum.sql
-- Migration: 015 - Add missing notification types (info, success, warning, error)
20250101000016_fix_notifications_rls_policy.sql
-- Migration: 016 - Allow application to insert notifications with proper tenant checks
20250130000018_create_service_contracts_module.sql
20250131000019_fix_service_contracts_rls_policies.sql
20250211_super_user_schema.sql
20250211000001_add_missing_company_columns.sql
-- Migration: Add Missing Company Columns
20250211000002_add_missing_product_columns.sql
-- Migration: Add Missing Product Columns
20250212_add_super_admin_column.sql
-- Migration: Add is_super_admin column to users table
20250213_make_super_users_tenant_independent.sql
-- Migration: Make super users truly tenant-independent
20250216_add_role_consistency_check.sql
Add Role Consistency Constraint
20250217_make_audit_logs_nullable.sql
Make audit_logs.tenant_id Nullable
20250303_complete_fix_super_user_rls_no_nested_selects.sql
20250304_add_companies_products_crud_policies.sql
-- Migration: Add INSERT, UPDATE, DELETE policies for companies and products
20250305_fix_super_admin_users_tenants_visibility.sql
Fix Super Admin Data Visibility
20250315000001_create_status_options.sql
-- Migration: Status Options Table for Module-Specific Statuses
20250315000002_create_reference_data.sql
-- Migration: Generic Reference Data Table
20250315000003_enhance_reference_tables.sql
-- Migration: Enhance Product Categories and Create Suppliers Table
20250322000021_create_sales_views.sql
-- Migration: Create sales views for denormalized data queries
20250322000022_create_crm_views.sql
-- Migration: Create CRM views for tickets and customers
20250322000023_create_contract_views.sql
-- Migration: Create contract views with denormalized data
20250322000024_create_job_works_views.sql
-- Migration: Create job works views with denormalized data
20250322000025_create_remaining_views.sql
-- Migration: Create remaining views for service contracts and complaints
20250328000026_remove_all_denormalized_fields.sql
-- Migration: Remove all 45+ denormalized fields from all tables
20250328000027_add_performance_indexes.sql
-- Migration: Add indexes to optimize query performance after normalization
20250328000028_add_audit_logs_user_columns.sql
-- Migration: Add user_name and user_email columns to audit_logs
20250329000001_enterprise_schema_normalization.sql
-- Migration: Remove remaining denormalized fields and computed fields
20251116000001_remove_redundant_super_admin_fields.sql
-- Migration: Remove Redundant Super Admin Fields
20251116000002_update_rls_policies_for_role_based_super_admin.sql
-- Migration: Update RLS Policies for Role-Based Super Admin Detection
20251116000003_normalize_user_access_schema.sql
-- Migration: Normalize User Access Schema - Enterprise RBAC Implementation
20251116000004_fix_roles_tenant_id_nullable.sql
-- Migration: 20251116000004 - Fix roles tenant_id nullable constraint
20251116000005_fix_user_roles_tenant_id_nullable.sql
-- Migration: 20251116000005 - Fix user_roles tenant_id nullable constraint
20251116000006_fix_user_roles_rls_infinite_recursion.sql
-- Migration: Fix user_roles RLS Infinite Recursion
20251116000007_fix_users_rls_policies_final.sql
-- Migration: Fix Users RLS Policies (Final)
20251117000001_update_complaints_schema.sql
-- Migration: Update complaints schema to match TypeScript types
20251117000002_add_product_sales_rls_policies.sql
-- Migration: Add RLS policies for product_sales table
20251117000003_add_user_security_fields.sql
-- Migration: 20251117000003 - Add User Security Fields
20251117000004_add_permissions_category.sql
-- Migration: 20251117000004 - Add Permissions Category Field
20251117000005_add_missing_module_tables.sql
-- Migration: 20251117000005 - Add Missing Module-Specific Tables
20251117000006_add_rls_policies_for_new_tables.sql
-- Migration: 20251117000006 - Add RLS Policies for New Module Tables
20251117000007_create_sales_pipeline_tables.sql
-- Migration: 20251117000007_create_sales_pipeline_tables.sql
20251118000001_add_product_hierarchy.sql
-- Migration: 20251118000001 - Add Product Hierarchy
20251118000002_add_deal_payment_revenue_columns.sql
-- Migration: 20251118000002_add_deal_payment_revenue_columns.sql
20251118000003_create_customer_management_tables.sql
-- Migration: 20251118000001 - Create Customer Management Tables
20251118000004_create_opportunities_table.sql
-- Migration: 20251118000002_create_opportunities_table.sql
20251118000005_create_product_categories.sql
-- Migration: 20251118000003_create_product_categories.sql
20251119000001_create_suppliers_table.sql
-- Migration: 20251119000001 - Suppliers Table (Fix)
20251119000002_purchase_orders.sql
-- Migration: 005 - Purchase Orders for Inventory Management
20251119000003_suppliers_and_foreign_keys_fix.sql
-- Migration: 20251119000003 - Suppliers Table and Foreign Key Relationships
20251119000004_cleanup_suppliers_partial_migration.sql
-- Migration: 20251119000004 - Cleanup Failed Suppliers Migration
20251119000005_add_supplier_foreign_keys_final.sql
-- Migration: 20251119000005 - Add Foreign Key Relationships to Suppliers
20251120000001_complete_suppliers_purchase_orders_system.sql
-- Migration: 20251120000001 - Complete Suppliers and Purchase Orders System
20251120000002_fix_user_roles_admin_policy_recursion.sql
-- Migration: Fix user_roles admin policy infinite recursion
20251120000003_create_auth_users.sql
-- Migration: Create auth users for local development
20251120000004_fix_users_rls_policies_recursion.sql
-- Migration: Fix users table RLS policies recursion
20251120000005_fix_all_rls_policies_recursion.sql
-- Migration: Fix ALL RLS policies with user_roles subqueries
20251120000006_fix_remaining_rls_policies.sql
-- Migration: Fix remaining RLS policies with subqueries
20251121000001_sync_auth_users_to_public_users.sql
-- Migration: Sync Auth Users to Public Users Table
20251121000002_quick_sync_missing_user.sql
-- Migration: Quick Sync Missing User
20251124000001_qualify_sync_function.sql
20251125000001_add_deleted_at_to_tickets.sql
-- Migration: 2025-11-25
20251127000001_set_auth_user_defaults.sql
-- Migration: set safe defaults for auth.users token/string fields
20251128000100_align_customer_schema.sql
-- Migration: Align customer & company schema with application contract
20251128000200_fix_auth_rls.sql
-- Migration: Reapply authentication RLS fixes (safe functions & policies)
20251128000300_disable_users_rls.sql
-- Migration: Disable RLS on public.users (auth compatibility)
20251128000400_reapply_sync_function.sql
-- Migration: Reapply schema-qualified sync_auth_user_to_public_user trigger
20251128000500_fix_customer_tag_relationships.sql
-- Migration: Establish foreign keys for customer_tag_mapping relationships
20251128000600_add_relationship_constraints.sql
-- Migration: Restore missing relationship constraints for PostgREST nesting
20251128000700_add_missing_ticket_company_columns.sql
-- Migration: add columns referenced by application code but missing post-reset
20251128000800_seed_reference_data.sql
-- Migration: Seed reference_data defaults for core CRM dropdowns
20251128000900_seed_customer_status_lead_data.sql
-- Migration: Seed customer_status, lead_source, and lead_rating reference data
20251128001000_add_deleted_at_to_tenants.sql
-- Migration: Add deleted_at column to tenants for soft-delete filtering
20251128001100_grant_user_management_to_admin_manager.sql
-- Migration: Grant full user management access to admin and manager roles
20251128001200_verify_admin_permissions.sql
-- Migration: Verify Administrator and Manager role permissions
20251128001300_fix_admin_user_permissions.sql
-- Migration: Fix admin user permissions
20251128001400_ensure_admin_user_has_role.sql
-- Migration: Ensure acme@admin.com user exists and has admin role
20251128001500_fix_user_roles_insert_policy.sql
-- Migration: Fix user_roles INSERT policy to allow admins to assign roles
20251128001600_add_audit_logs_user_columns.sql
-- Migration: Add user_name and user_email columns to audit_logs
20251128001700_normalize_role_names.sql
-- Migration: Normalize Role Names to Match UserRole Enum
20251128001800_fix_role_permissions_rls_policies.sql
-- Migration: Fix role_permissions RLS policies to allow admins to manage permissions
20251128001900_create_navigation_items_table.sql
-- Migration: Create navigation_items table for database-driven navigation
20251128002000_seed_navigation_items.sql
-- Migration: Seed navigation items from current hardcoded config
20251128002100_add_navigation_manage_permission.sql
-- Migration: Add navigation:manage permission
20251129000001_element_level_permissions.sql
20251129000002_correct_roles_permissions_seed.sql
20251129000003_fix_navigation_permissions.sql
20251130000001_restore_complaints_schema.sql
20251130000002_user_management_element_permissions.sql
20251130000003_fix_tenant_admin_element_permissions.sql
20251130000004_cleanup_roles_frs_compliance.sql
20251130000005_fix_roles_insert_rls_policy.sql
-- Migration: Fix roles INSERT RLS policy to use permission-based checks
20251130000006_fix_audit_logs_rls_policy.sql
-- Migration: Fix audit_logs RLS policy to use safe functions
20251130000007_add_dashboard_element_permissions.sql
-- Migration: Add Dashboard Element-Level Permissions
20251130000008_add_customer_form_element_permissions.sql
-- Migration: Add Customer Form Element-Level Permissions
20251130000009_add_customer_detail_element_permissions.sql
-- Migration: Add Customer Detail Element-Level Permissions
20251130000010_add_deleted_at_to_products.sql
-- Migration: Add deleted_at column to products table
20251202000001_update_sales_table_for_deals.sql
-- Migration: Update sales table to support deals functionality
20251204_add_deal_types_and_items.sql
-- Migration: Add deal_type, contract_id and extend deal_items for PRODUCT/SERVICE support
20251204000001_create_deal_transactions.sql
-- Migration: create stored procedures for atomic deal + items operations
20251205000000_remove_realtime_conflicting_tenant.sql
-- Migration: Remove conflicting realtime tenant to avoid Realtime seeding duplicate errors
20251205000001_add_missing_schema_columns.sql
Add Missing Schema Columns
20251206000001_create_deal_items_table.sql
Create Deal Items Table
20251207000001_add_product_sale_permissions.sql
Add Product-Sales Element-Level Permissions
20251208000001_add_product_sale_element_permissions.sql
